<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Global Tooltip with Horizontal Scroll</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow-x: auto;
      overflow-y: hidden;
      height: 100dvh;
    }

    .scroll-wrapper {
      width: 11518px;
      height: 100dvh;
      background-image: url('background.jpg');
      background-size: contain;
      background-position: left;
      background-repeat: no-repeat;
      position: relative;
      z-index: 1;
    }

    .hover-box {
      position: absolute;
      background-color: rgba(0, 0, 0, 0.3);
      border: 2px solid red;
      cursor: pointer;
      z-index: 10;
    }

    #tooltip {
      position: absolute;
      visibility: hidden;
      background-color: rgba(1, 0, 0, 0.75);
      color: #fff;
      text-align: center;
      padding: 6px 10px;
      border-radius: 4px;
      width: 400px;
      white-space: normal;
      overflow-wrap: break-word;
      z-index: 999;
      pointer-events: none;
    }
  </style>
</head>
<body>

  <div class="scroll-wrapper">
    <!-- Hover boxes with tooltips via data-tooltip -->
    <div class="hover-box" style="top: 390px; left: 13%; width: 400px; height: 350px;"
         data-tooltip="Two withered hands, severed at the wrist, forever outstretched as if to receive a mercy that never came. For seven nights she cast lots in silence, asking not for salvation, but for a sign. None came â€” only stillness, and then, severance. His hands were all she left behind, palms open, still waiting. Between them, an absent relic, what it never held. Do you seek the relic, or the absence it leaves behind?">
    </div>

    <div class="hover-box" style="top: 41px; left: 23%; width: 700px; height: 350px;"
         data-tooltip="A flicker of warmth in a cold world. The fire may guide you, or it may consume all that you are, leaving only ashes behind.">
    </div>
  </div>

  <!-- Global Tooltip Element -->
  <div id="tooltip"></div>

  <script>
    const tooltip = document.getElementById('tooltip');
    const hoverBoxes = document.querySelectorAll('.hover-box');

    hoverBoxes.forEach(box => {
      box.addEventListener('mousemove', e => {
        const message = box.getAttribute('data-tooltip');
        tooltip.textContent = message;
        tooltip.style.visibility = 'visible';

        // Get mouse position and calculate tooltip position
        const offsetX = 6;
        const offsetY = 6;
        let newX = e.pageX + offsetX;
        let newY = e.pageY + offsetY;

        const tooltipRect = tooltip.getBoundingClientRect();
        const windowWidth = window.innerWidth;
        const windowHeight = window.innerHeight;

        if ((newX - window.scrollX) + tooltipRect.width > windowWidth) {
          newX = e.clientX - tooltipRect.width - offsetX;
        }
        if ((newY - window.scrollY) + tooltipRect.height > windowHeight) {
          newY = e.clientY - tooltipRect.height - offsetY;
        }

        tooltip.style.left = `${newX}px`;
        tooltip.style.top = `${newY}px`;
      });

      box.addEventListener('mouseleave', () => {
        tooltip.style.visibility = 'hidden';
      });
    });
  </script>
</body>
</html>
